(()=>{"use strict";var e,t={758:()=>{const e=window.wp.element,t=window.wp.i18n,o=window.wp.blockEditor,l=window.wp.components,r=window.wp.primitives,a=(0,e.createElement)(r.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(r.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})),n=window.wp.blocks,i=JSON.parse('{"u2":"wporg/site-screenshot"}'),s=window.wp.editor,c=window.wp.editPost,d=window.wp.plugins,m=window.wp.data,p=function({icon:t,size:o=24,...l}){return(0,e.cloneElement)(t,{width:o,height:o,...l})},u=(0,e.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,e.createElement)(r.Path,{d:"M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"})),w=window.wp.coreData,g=window.wp.compose,h="#f6f6f6",_=function({label:o,description:r}){const[a,n]=(0,e.useState)(!0),i=(0,m.useSelect)((e=>e(s.store).getEditedPostAttribute("type")),[]),[c,d]=(0,w.useEntityProp)("postType",i,"meta"),_=c["feature-color"]||h,E=e=>{const t=e.startsWith("#")?e:"#"+e;d({...c,"feature-color":t})},b=_.replace("#",""),v=/^[0-9a-f]+$/.test(b)&&[3,4,6,8].includes(b.length),f=!!c["screenshot-desktop"],k=(0,g.usePrevious)(f);return(0,e.useEffect)((()=>{void 0!==k&&!k&&f&&(b!==h.replace("#","")?n(!1):E(""))}),[f,b]),(0,e.createElement)("div",{className:"wporg-site-color"},(0,e.createElement)(l.BaseControl.VisualLabel,null,o),(0,e.createElement)("p",null,r),f&&(0,e.createElement)(l.ToggleControl,{label:(0,t.__)("Use color from image","wporg"),checked:a,onChange:()=>{const e=!a;E(e?"":h),n(e)}}),(!a||!f)&&(0,e.createElement)(l.PanelRow,null,v?(0,e.createElement)(l.ColorIndicator,{colorValue:_}):(0,e.createElement)(p,{fill:"#cc1818",icon:u}),(0,e.createElement)(l.TextControl,{label:o,hideLabelFromVision:!0,value:_,onChange:E}),(0,e.createElement)(l.Button,{onClick:()=>E(h)},(0,t.__)("Reset","wporg"))))},E=window.wp.blob,b=(0,e.createElement)("p",null,(0,t.__)("To edit the featured image, you need permission to upload media.","wporg")),v=(0,g.compose)(l.withNotices)((function({metaKey:r,label:a,noticeUI:n,noticeOperations:i}){const{meta:c,media:d,mediaId:p,mediaUpload:u}=(0,m.useSelect)((e=>{const t=e(s.store).getEditedPostAttribute("meta"),l=t[r];return{meta:t,mediaId:l,media:l?e(w.store).getMedia(l,{context:"view"}):null,mediaUpload:e(o.store).getSettings().mediaUpload}}),[]),{editPost:g}=(0,m.useDispatch)(s.store),h=(0,e.useRef)(),[_,v]=(0,e.useState)(!1),{mediaWidth:f,mediaHeight:k,mediaSourceUrl:y}=function(e,t="screenshot-desktop"){var o;return e?t in(null!==(o=e?.media_details?.sizes)&&void 0!==o?o:{})?{mediaWidth:e.media_details.sizes[t].width,mediaHeight:e.media_details.sizes[t].height,mediaSourceUrl:e.media_details.sizes[t].source_url}:{mediaWidth:e.media_details.width,mediaHeight:e.media_details.height,mediaSourceUrl:e.source_url}:{}}(d,r),C=e=>{g({meta:{...c,[r]:e.id}})},S=e=>{u({allowedTypes:["image"],filesList:e,onFileChange:([e])=>{(0,E.isBlobURL)(e?.url)?v(!0):(C(e),v(!1))},onError:e=>{i.removeAllNotices(),i.createErrorNotice(e)}})};return(0,e.createElement)(e.Fragment,null,n,(0,e.createElement)("div",{className:"wporg-site-screenshot"},d&&(0,e.createElement)("div",{id:`wporg-site-screenshot-${p}-describedby`,className:"hidden"},d.alt_text&&(0,t.sprintf)(// Translators: %s: The selected image alt text.
(0,t.__)("Current image: %s","wporg"),d.alt_text),!d.alt_text&&(0,t.sprintf)(// Translators: %s: The selected image filename.
(0,t.__)("The current image has no alternative text. The file name is: %s","wporg"),d.media_details.sizes?.full?.file||d.slug)),(0,e.createElement)(o.MediaUploadCheck,{fallback:b},(0,e.createElement)(o.MediaUpload,{onSelect:C,unstableFeaturedImageFlow:!0,allowedTypes:["image"],render:({open:o})=>(0,e.createElement)("div",{className:"wporg-site-screenshot__container"},(0,e.createElement)(l.Button,{ref:h,className:p?"wporg-site-screenshot__preview":"wporg-site-screenshot__toggle",onClick:o,"aria-label":p?(0,t.__)("Edit or replace the image","wporg"):null,"aria-describedby":p?`wporg-site-screenshot-${p}-describedby`:null},!!p&&d&&(0,e.createElement)(l.ResponsiveWrapper,{naturalWidth:f,naturalHeight:k,isInline:!0},(0,e.createElement)("img",{src:y,alt:""})),_&&(0,e.createElement)(l.Spinner,null),!p&&!_&&a),!!p&&(0,e.createElement)("div",{className:"wporg-site-screenshot__actions"},(0,e.createElement)(l.Button,{className:"wporg-site-screenshot__action",onClick:o,"aria-hidden":"true"},(0,t.__)("Replace","wporg")),(0,e.createElement)(l.Button,{className:"wporg-site-screenshot__action",onClick:()=>{g({meta:{...c,[r]:0}}),h.current.focus()}},(0,t.__)("Remove","wporg"))),(0,e.createElement)(l.DropZone,{onFilesDrop:S})),value:p}))))}));(0,d.registerPlugin)("wporg-screenshots-panel",{render:()=>"post"!==(0,m.useSelect)((e=>e(s.store).getEditedPostAttribute("type")),[])?null:(0,e.createElement)(c.PluginDocumentSettingPanel,{name:"wporg-screenshots",title:(0,t.__)("Screenshots","wporg")},(0,e.createElement)(v,{metaKey:"screenshot-desktop",label:(0,t.__)("Desktop","wporg")}),(0,e.createElement)("p",null,(0,t.__)("Capture a desktop image at 1920 wide by 1080 tall, use at least 2x dpi.","wporg")),(0,e.createElement)("hr",null),(0,e.createElement)(v,{metaKey:"screenshot-mobile",label:(0,t.__)("Mobile","wporg")}),(0,e.createElement)("p",null,(0,t.__)("Capture a mobile image at 375 wide by 667 tall, use at least 2x dpi.","wporg")),(0,e.createElement)("hr",null),(0,e.createElement)(_,{label:(0,t.__)("Color","wporg"),description:(0,t.__)("Feature color to use as header background.","wporg")}))}),(0,n.registerBlockType)(i.u2,{edit:function({attributes:{isLink:r,lazyLoad:n,type:i},setAttributes:s}){return(0,e.createElement)("div",{...(0,o.useBlockProps)()},(0,e.createElement)(o.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:(0,t.__)("Settings","wporg")},(0,e.createElement)(l.ToggleControl,{label:(0,t.__)("Make image link to Post","wporg"),checked:r,onChange:()=>s({isLink:!r})}),(0,e.createElement)(l.ToggleControl,{label:(0,t.__)("Lazy load image","wporg"),checked:n,onChange:()=>s({lazyLoad:!n})}),(0,e.createElement)(l.SelectControl,{label:(0,t.__)("Image","wporg"),value:i,options:[{label:(0,t.__)("Desktop","wporg"),value:"desktop"},{label:(0,t.__)("Mobile","wporg"),value:"mobile"}],onChange:e=>s({size:e})}))),(0,e.createElement)(l.Placeholder,{icon:a,label:(0,t.__)("Site Screenshot","wporg")}))},save:()=>null})}},o={};function l(e){var r=o[e];if(void 0!==r)return r.exports;var a=o[e]={exports:{}};return t[e](a,a.exports,l),a.exports}l.m=t,e=[],l.O=(t,o,r,a)=>{if(!o){var n=1/0;for(d=0;d<e.length;d++){for(var[o,r,a]=e[d],i=!0,s=0;s<o.length;s++)(!1&a||n>=a)&&Object.keys(l.O).every((e=>l.O[e](o[s])))?o.splice(s--,1):(i=!1,a<n&&(n=a));if(i){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,r,a]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={787:0,529:0};l.O.j=t=>0===e[t];var t=(t,o)=>{var r,a,[n,i,s]=o,c=0;if(n.some((t=>0!==e[t]))){for(r in i)l.o(i,r)&&(l.m[r]=i[r]);if(s)var d=s(l)}for(t&&t(o);c<n.length;c++)a=n[c],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(d)},o=globalThis.webpackChunkwporg_showcase_2022_theme=globalThis.webpackChunkwporg_showcase_2022_theme||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r=l.O(void 0,[529],(()=>l(758)));r=l.O(r)})();